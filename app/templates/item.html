{% extends "layout.html" %}
{% block content %}

<a class="btn btn-secondary btn-sm mb-3" href="{{ url_for('device_checklist', device_id=device.id) }}">
    &laquo; Back to Checklist
</a>

<h2>{{ item.control_id }} â€” {{ item.title }}</h2>

<div class="mb-3">
    <span class="badge bg-primary">{{ item.section }}</span>
    &nbsp;
    <span class="status-badge status-{{ item.status.replace(' ', '') }}">
        {{ item.status }}
    </span>
</div>

<h4>Rationale</h4>
<p>{{ item.rationale }}</p>

<h4>Fix Text</h4>
<pre class="p-3 bg-light border rounded">{{ item.fix_text }}</pre>

<h4>Comment</h4>
<p>{{ item.comment }}</p>

<hr>

<h4>Update Review</h4>

<form method="post" class="mt-3">
    <div class="mb-3">
        <label class="form-label">Status</label>
        <select name="status" class="form-select">
            <option value="Not Reviewed" {% if item.status=='Not Reviewed' %}selected{% endif %}>Not Reviewed</option>
            <option value="Compliant" {% if item.status=='Compliant' %}selected{% endif %}>Compliant</option>
            <option value="Non Compliant" {% if item.status=='Non Compliant' %}selected{% endif %}>Non Compliant</option>
            <option value="Non Applicable" {% if item.status=='Non Applicable' %}selected{% endif %}>Non Applicable</option>
        </select>
    </div>

    <div class="mb-3">
        <label class="form-label">Reviewer Note</label>
        <textarea name="note" rows="4" class="form-control">{{ item.comment }}</textarea>
    </div>

    <button class="btn btn-primary">Save Review</button>
</form>

{% endblock %}
